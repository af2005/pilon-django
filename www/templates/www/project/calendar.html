{% extends "www/base+sidebar+title.html" %}
{% load static %}
{% block navigation %}{% include 'www/snippets/navigation-create-button.html' %}{% endblock %}

{% block additional_assets %}
    <link href='{% static "www/fullcalendar/custom.css" %}' rel='stylesheet'/>

    <script src='{% static "www/fullcalendar/main.min.js" %}'></script>
    <script type="application/javascript">

        document.addEventListener('DOMContentLoaded', function () {
            const calendarEl = document.getElementById('full-calendar');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                events: '/schedule/api/occurrences?calendar_slug={{ project.key }}',
                timeZone: 'local',
                editable: true,
                initialView: 'dayGridMonth',
                firstDay: 1,
                themeSystem: 'bootstrap',
                headerToolbar: {
                    start: 'prev,next today',
                    center: 'title',
                    end: 'dayGridMonth,timeGridWeek createButton'
                },
                bootstrapFontAwesome: {
                    prev: ' bi bi-chevron-left',
                    next: ' bi bi-chevron-right',
                    prevYear: ' bi bi-chevron-double-left',
                    nextYear: ' bi bi-chevron-double-right',
                    close: 'bi bi-x'
                },
                customButtons: {
                    createButton: {
                        text: 'Add event...',
                        click: function () {
                            $('#calendar-new-event-modal').modal('show')
                        },
                        class: ""
                    }
                },
            });
            calendar.render();
        });

    </script>
{% endblock %}



{% block additional_scripts_eob %}
{% endblock %}


{% block content %}
    {{ content }}
    <div id="full-calendar" class="mx-2 row shadow">
    </div>


    <div id="calendar-new-event-modal" class="modal fade" tabindex="-1" data-bs-backdrop="static"
         data-bs-keyboard="false" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="staticBackdropLabel">Create new event</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Understood</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}